(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/defaultPictureBig.926fda93.png"},40:function(e,t,a){e.exports=a.p+"static/media/logo.6c5c11b9.PNG"},44:function(e,t,a){e.exports=a(75)},49:function(e,t,a){},50:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),s=a.n(c),l=(a(49),a(50),a(1)),i=a.n(l),o=a(5),u=a(2),m=function(e){var t=e.label,a=e.error,n=e.name,c=e.onChange,s=e.type,l=e.defaultValue,i="form-control";return"file"===s&&(i+="-file"),void 0!==a&&(i+=" is-invalid"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,t),r.a.createElement("input",{className:i,type:s,name:n,defaultValue:l,onChange:c,autoComplete:"off"}),r.a.createElement("div",{className:"invalid-feedback"},a))},d=a(6),p=a.n(d),f=function(e,t,a){var r=Object(n.useState)(!1),c=Object(u.a)(r,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){var n,r,c=function(n,r,c){n===e&&(a&&r===t||!a&&r.startsWith(t))&&l(c)};return n=p.a.interceptors.request.use((function(e){var t=e.url,a=e.method;return c(a,t,!0),e})),r=p.a.interceptors.response.use((function(e){var t=e.config,a=t.url,n=t.method;return c(n,a,!1),e}),(function(e){var t=e.config,a=t.url,n=t.method;throw c(n,a,!1),e})),function(){p.a.interceptors.request.eject(n),p.a.interceptors.response.eject(r)}}),[t,e,a]),s},b=a(8),v=a(4),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return p.a.get("/api/users?page=".concat(e,"&size=").concat(t))},E=function(e){var t=e.username,a=e.password;if(e.isLoggedIn){var n="Basic ".concat(btoa(t+":"+a));p.a.defaults.headers.Authorization=n}else delete p.a.defaults.headers.Authorization},h=function(e){return p.a.get("/api/users/".concat(e))},N=function(e,t){return p.a.put("/api/users/".concat(e),t,{headers:{"accept-language":"en"}})},j=function(e){return p.a.post("/api/tweets",e)},O=function(e,t){var a=e?"/api/".concat(e,"/tweets?page="):"/api/tweets?page=";return p.a.get(a+t)},w=function(e,t){var a=t?"/api/".concat(t,"/tweets/").concat(e):"api/tweets/"+e;return p.a.get(a)},x=function(e,t){var a=t?"/api/".concat(t,"/tweets/").concat(e,"?count=true"):"/api/tweets/".concat(e,"?count=true");return p.a.get(a)},y=function(e,t){var a=t?"/api/".concat(t,"/tweets/").concat(e,"?direction=after"):"/api/tweets/".concat(e,"?direction=after");return p.a.get(a)},k=function(e){return p.a.post("/api/tweet-attachments",e)},C=function(e){return p.a.delete("/api/tweets/"+e)},S=function(e){return p.a.delete("/api/tweets/delete/"+e)},L=function(e){return{type:"Login-Success",payload:e}},I=function(e){return function(){var t=Object(o.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c=e,p.a.post("/api/auth",{},{auth:c});case 2:return n=t.sent,r=Object(v.a)(Object(v.a)({},n.data),{},{password:e.password}),a(L(r)),t.abrupt("return",n);case 6:case"end":return t.stop()}var c}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(o.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r=e,p.a.post("/api/users",r,{headers:{"accept-language":"en"}});case 2:return n=t.sent,t.next=5,a(I(e));case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(),d=Object(u.a)(l,2),p=d[0],v=d[1],g=Object(n.useState)(),E=Object(u.a)(g,2),h=E[0],N=E[1],j=Object(b.b)();Object(n.useEffect)((function(){N(void 0)}),[c,p]);var O=function(){var t=Object(o.a)(i.a.mark((function t(a){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={username:c,password:p},r=e.history,s=r.push,N(void 0),t.prev=5,t.next=8,j(I(n));case 8:s("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),N(t.t0.response.data.message);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}(),w=f("post","/api/auth"),x=c&&p;return r.a.createElement("div",{className:"container mt-4"},r.a.createElement("h1",{className:"text-center"},"Login"),r.a.createElement("form",null,r.a.createElement(m,{label:"Username",onChange:function(e){return s(e.target.value)}}),r.a.createElement(m,{label:"password",type:"password",onChange:function(e){return v(e.target.value)}}),h&&r.a.createElement("div",{className:"alert alert-danger"},"! Username or password wrong"),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"btn btn-primary",onClick:O,disabled:!x||w},w&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"})," Login"))))},D=a(9),F=a(26),R=a.n(F),T=function(e){var t=e.image,a=e.tempimage,n=R.a;return t&&(n="images/profile/"+t),r.a.createElement("img",Object.assign({src:a||n},e,{alt:"profile-pic",onError:function(e){e.target.src=R.a}}))},z=function(e){var t=e.user,a=t.username,n=t.displayName,c=t.image;return r.a.createElement(D.b,{to:"/users/"+t.username,className:"list-group-item list-group-item-action font-weight-bolder"},r.a.createElement(T,{className:"rounded-circle mr-2",width:"35px",height:"35px",image:c,alt:t.username+"profile"}),n," ",r.a.createElement("span",{className:"font-weight-lighter"}," @",a))},P=function(){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border text-black-50"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},_=function(){var e=Object(n.useState)({content:[],size:5,number:0}),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),l=Object(u.a)(s,2),m=l[0],d=l[1],p=f("get","/api/users?page");Object(n.useEffect)((function(){b()}),[]);var b=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!1),e.prev=1,e.next=4,g(t);case 4:a=e.sent,c(a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d(!0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),v=a.content,E=a.last,h=a.first,N=r.a.createElement("div",null,!1===h&&r.a.createElement("button",{className:"btn btn-light btn-sm float-left ",onClick:function(){var e=a.number-1;b(e)}},"Previous "),!1===E&&r.a.createElement("button",{className:"btn btn-light btn-sm float-right",onClick:function(){var e=a.number+1;b(e)}}," Next > "));return p&&(N=r.a.createElement(P,null)),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"list-group-flush"},r.a.createElement("h4",{className:"card-header text-center"},"User List"),m?r.a.createElement("div",{className:"alert alert-danger m-5 text-center",role:"alert"},"Loading Error !"):v.map((function(e){return r.a.createElement(z,{key:e.username,user:e})}))),N)},B=(a(74),function(e){var t=e.image,a=e.uploading;return r.a.createElement("div",{style:{position:"relative"},className:"pl-4 pr-4 mt-2"},r.a.createElement("img",{src:t,alt:"-",className:"img-thumbnail "}),r.a.createElement("div",{className:"overlay",style:{opacity:a?1:0}},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement("div",{className:"spinner-border text-light m-auto"},r.a.createElement("span",{className:"sr-only"},"Loading...")))))}),V=function(){var e=Object(b.c)((function(e){return{image:e.image}})).image,t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),d=Object(u.a)(l,2),p=d[0],v=d[1],g=Object(n.useState)({}),E=Object(u.a)(g,2),h=E[0],N=E[1],O=Object(n.useState)(),w=Object(u.a)(O,2),x=w[0],y=w[1],C=Object(n.useState)(),S=Object(u.a)(C,2),L=S[0],I=S[1],U=f("post","/api/tweets",!0),A=f("post","/api/tweet-attachments",!0);Object(n.useEffect)((function(){c||(v(""),N({}),y(),I())}),[c]),Object(n.useEffect)((function(){N({})}),[p]);var D=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={content:p,attachmentId:L},e.prev=1,e.next=4,j(t);case 4:s(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0.response.data.validationErrors&&N(e.t0.response.data.validationErrors);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),e.next=4,k(a);case 4:n=e.sent,I(n.data.id);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R="form-control";return h.content&&(R+=" is-invalid"),r.a.createElement("div",{className:"card p-2"},r.a.createElement("div",{className:"d-flex flex-row mt-2"},r.a.createElement(T,{className:"rounded-circle mr-2",width:"32px",height:"32px",image:e}),r.a.createElement("div",{className:"flex-fill"},r.a.createElement("textarea",{className:R,onFocus:function(){return s(!0)},rows:c?"3":"1",value:p,onChange:function(e){return v(e.target.value)}}),r.a.createElement("div",{className:"invalid-feedback"},h.content))),c&&r.a.createElement(r.a.Fragment,null,!x&&r.a.createElement(m,{type:"file",onChange:function(e){if(!(e.target.files.length<1)){var t=e.target.files[0],a=new FileReader;a.onloadend=function(){y(a.result),F(t)},a.readAsDataURL(t)}}}),x&&r.a.createElement(B,{image:x,uploading:A}),r.a.createElement("div",{className:"text-right mt-1"},r.a.createElement("button",{className:"btn btn-primary m-2 d-inline-flex btn-sm",onClick:D,disabled:U||A},U&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),r.a.createElement("i",{className:"material-icons mr-1",style:{fontSize:"21px"}},"send"),"Submit"),r.a.createElement("button",{className:"btn btn-danger btn-sm d-inline-flex",onClick:function(){return s(!1)},disabled:U||A},r.a.createElement("i",{className:"material-icons"},"close"),"Cancel"))))},W=a(15),q=a(43),J=function(e){var t=e.visible,a=e.onClickCancel,n=e.message,c=e.onClickOk,s=e.pendingApiCall,l=e.modalTittle,i="modal fade";return t&&(i+=" show d-block"),r.a.createElement("div",{className:i,style:{backgroundColor:"rgba(0,0,0,0.69)"}},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},l)),r.a.createElement("div",{className:"modal-body"},n),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{className:"btn btn-secondary",onClick:a,disabled:s},"Cancel"),r.a.createElement("button",{className:"btn btn-primary",onClick:c,disabled:s},s&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),l)))))},M=function(e){var t=Object(b.c)((function(e){return e.username})),a=e.tweet,c=e.onDeleteTweet,s=a.user,l=a.content,m=a.date,d=a.fileAttachment,v=a.id,g=a.likeCount,E=a.iliked,h=s.username,N=s.displayName,j=s.image,O=Object(n.useState)(!1),w=Object(u.a)(O,2),x=w[0],y=w[1],k=Object(n.useState)(g),L=Object(u.a)(k,2),I=L[0],U=L[1],A=Object(n.useState)(E),F=Object(u.a)(A,2),R=F[0],z=F[1];Object(n.useEffect)((function(){}),[I]);var P=f("delete","/api/tweets/"+v,!0),_=t===h,B=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(v);case 2:c(v);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=7;break}return e.next=3,t=v,p.a.post("/api/tweets/"+t);case 3:U(I+1),z(!0),e.next=11;break;case 7:return e.next=9,S(v);case 9:U(I-1),z(!1);case 11:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}(),W=Object(q.a)(m);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card mb-2"},r.a.createElement("div",{className:"d-flex"},r.a.createElement(T,{image:j,width:"52",height:"52",className:"rounded-circle p-1"}),r.a.createElement("div",{className:"flex-fill mt-2 pl-2"},r.a.createElement(D.b,{to:"/users/".concat(h),className:"text-decoration-none text-dark"},r.a.createElement("span",{className:"font-weight-bolder"},N," @",h),r.a.createElement("span",{className:"text-muted font-weight-light"}," \xb7 ",W))),_&&r.a.createElement("button",{className:"btn btn-sm btn-delete-link",onClick:function(){return y(!0)}},r.a.createElement("i",{className:"material-icons"},"delete_outline"))),r.a.createElement("div",{className:"pl-3 mt-1"},l),d&&r.a.createElement("div",{className:"pl-3"},r.a.createElement("img",{className:"img-fluid",src:"images/attachments/"+d.name,alt:"--"})),r.a.createElement("div",{className:"row text-center m-2"},r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"btn btn-sm btn-like-link d-inline-flex",disabled:!t},r.a.createElement("i",{className:"material-icons icon-hover",style:{hover:"none"}},"comment"),r.a.createElement("span",{className:"ml-1 text-black-50"}))),r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"btn btn-sm btn-like-link d-inline-flex",disabled:!t},r.a.createElement("i",{className:"material-icons icon-hover",style:{hover:"none"}},"swap_vert"),r.a.createElement("span",{className:"ml-1 text-black-50"}))),r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"btn btn-sm btn-like-link d-inline-flex",disabled:!t,onClick:V},r.a.createElement("i",{className:"material-icons icon-hover",style:{color:R&&t?"red":"",hover:"none"}},"favorite"),r.a.createElement("span",{className:"ml-1 text-black-50"},I," "))))),r.a.createElement(J,{visible:x,onClickCancel:function(){y(!1)},onClickOk:B,pendingApiCall:P,message:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Are you sure to delete tweet?")),r.a.createElement("span",null,l)),modalTittle:"Delete Tweet"}))},G=a(7),$=function(){var e=Object(n.useState)({content:[],last:!0}),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(0),l=Object(u.a)(s,2),m=l[0],d=l[1],p=Object(G.h)().username,b=p?"/api/".concat(p,"/tweets?page="):"/api/tweets?page=",g=f("get",b),E=0,h=0;if(a.content.length>0){h=a.content[0].id;var N=a.content.length-1;E=a.content[N].id}var j=p?"/api/".concat(p,"/tweets/").concat(E):"api/tweets/"+E,k=f("get",j,!0),C=p?"/api/".concat(p,"/tweets/").concat(h,"?direction=after"):"/api/tweets/".concat(h,"?direction=after"),S=f("get",C,!0);Object(n.useEffect)((function(){var e=setInterval(function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(h,p);case 2:t=e.sent,d(t.data.count);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),2500);return function(){clearInterval(e)}}),[h,p]),Object(n.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(p,t);case 3:a=e.sent,c((function(e){return Object(v.a)(Object(v.a)({},a.data),{},{content:[].concat(Object(W.a)(e.content),Object(W.a)(a.data.content))})})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}})()()}),[p]);var L=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(E,p);case 3:t=e.sent,c((function(e){return Object(v.a)(Object(v.a)({},t.data),{},{content:[].concat(Object(W.a)(e.content),Object(W.a)(t.data.content))})})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(h,p);case 2:t=e.sent,c((function(e){return Object(v.a)(Object(v.a)({},e),{},{content:[].concat(Object(W.a)(t.data),Object(W.a)(e.content))})})),d(0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){c((function(t){return Object(v.a)(Object(v.a)({},t),{},{content:t.content.filter((function(t){return t.id!==e}))})}))},A=a.content,D=a.last;return 0===A.length?r.a.createElement("div",{className:"alert alert-secondary text-center"},g?r.a.createElement(P,null):"Load old tweets"):r.a.createElement("div",null,m>0&&r.a.createElement("div",{className:"alert alert-secondary text-center mb-1",onClick:S?function(){}:I,style:{cursor:S?"not-allowed":"pointer"}},S?r.a.createElement(P,null):"There are new tweets "+m),A.map((function(e){return r.a.createElement(M,{key:e.id,tweet:e,onDeleteTweet:U})})),!D&&r.a.createElement("div",{className:"alert alert-secondary text-center",onClick:k?function(){}:L,style:{cursor:k?"not-allowed":"pointer"}},k?r.a.createElement(P,null):"Load old tweets"))},H=function(){var e=Object(b.c)((function(e){return{isLoggedIn:e.isLoggedIn}})).isLoggedIn;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"mb-2"},e&&r.a.createElement(V,null)),r.a.createElement($,null)),r.a.createElement("div",{className:"col-4 ml-auto"},r.a.createElement(_,null))))},K=a(20),Q=function(e){var t,a=Object(n.useState)({username:null,displayName:null,password:null,passwordRepeat:null}),c=Object(u.a)(a,2),s=c[0],l=c[1],d=Object(n.useState)({}),p=Object(u.a)(d,2),g=p[0],E=p[1],h=Object(b.b)(),N=function(e){var t=e.target,a=t.name,n=t.value;E((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(K.a)({},a,void 0))})),l((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(K.a)({},a,n))}))},j=function(){var t=Object(o.a)(i.a.mark((function t(a){var n,r,c,l,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.history,r=n.push,c=s.username,l=s.displayName,o=s.password,u={username:c,displayName:l,password:o},t.prev=5,t.next=8,h(U(u));case 8:r("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),t.t0.response.data.validationErrors&&E(t.t0.response.data.validationErrors);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}(),O=f("post","/api/users"),w=f("post","/api/auth"),x=O&&w,y=g.username,k=g.displayName,C=g.password;return s.password!==s.passwordRepeat&&(t="Passwords not match"),r.a.createElement("div",{className:"container text-center"},r.a.createElement("div",{className:"card"},r.a.createElement("h1",{className:"card-header text-center"},"Sing Up"),r.a.createElement("div",{className:"card-body"},r.a.createElement(m,{label:"Username",name:"username",error:y,onChange:N}),r.a.createElement(m,{label:"Display Name",name:"displayName",error:k,onChange:N}),r.a.createElement(m,{label:"Password",name:"password",error:C,onChange:N,type:"password"}),r.a.createElement(m,{label:"Password Repeat",name:"passwordRepeat",error:t,onChange:N,type:"password"}),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"btn btn-primary",onClick:j,disabled:x||t},x&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"})," Sing Up")))))},X=a(40),Y=a.n(X),Z=function(e){var t=Object(b.c)((function(e){return{isLoggedIn:e.isLoggedIn,username:e.username,displayName:e.displayName,image:e.image}})),a=t.username,c=t.isLoggedIn,s=t.displayName,l=t.image,i=Object(n.useRef)(null),o=Object(n.useState)(!1),m=Object(u.a)(o,2),d=m[0],p=m[1];Object(n.useEffect)((function(){return document.addEventListener("click",f),function(){document.removeEventListener("click",f)}}),[c]);var f=function(e){null!==i.current&&i.current.contains(e.target)||p(!1)},v=Object(b.b)(),g=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",null,r.a.createElement(D.b,{className:"nav-link mr-1 font-weight-bolder",to:"/login"},r.a.createElement("i",{className:"material-icons d-block"},"login"),"Login")),r.a.createElement("li",null,r.a.createElement(D.b,{className:"nav-link text-center font-weight-bolder",to:"/singup"},r.a.createElement("i",{className:"material-icons d-block"}," group_add"),"Sing Up")));if(c){var E="dropdown-menu p-0 shadow";d&&(E+=" show"),g=r.a.createElement("ul",{className:"navbar-nav ml-auto",ref:i},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("div",{className:"d-flex",style:{cursor:"pointer"},onClick:function(){return p(!0)}},r.a.createElement(T,{className:"rounded-circle m-auto",image:l,width:"49",height:"49"}),r.a.createElement("span",{className:"nav-link dropdown-toggle font-weight-bolder"},s)),r.a.createElement("div",{className:E},r.a.createElement(D.b,{className:"dropdown-item d-flex p-2",to:"/users/"+a,onClick:function(){return p(!1)}},r.a.createElement("i",{className:"material-icons text-info mr-2"},"person"),"My profile"),r.a.createElement(D.b,{className:"dropdown-item d-flex p-2",to:"/",onClick:function(){v({type:"Logout-Success"})}},r.a.createElement("i",{className:"material-icons text-danger mr-2"},"power_settings_new")," Logout"))))}return r.a.createElement("div",{className:"shadow-sm bg-light mb-2"},r.a.createElement("nav",{className:"navbar navbar-light container navbar-expand"},r.a.createElement(D.b,{className:"navbar-brand",to:"/"},r.a.createElement("img",{src:Y.a,alt:"logo",width:"153",height:"60",className:"mr-3"})),g))},ee=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(),d=Object(u.a)(l,2),g=d[0],E=d[1],h=Object(b.c)((function(e){return{username:e.username}})).username,j=Object(G.h)().username,O=Object(n.useState)({}),w=Object(u.a)(O,2),x=w[0],y=w[1],k=Object(n.useState)(!1),C=Object(u.a)(k,2),S=C[0],L=C[1],I=Object(n.useState)(),U=Object(u.a)(I,2),A=U[0],D=U[1],F=Object(n.useState)({}),R=Object(u.a)(F,2),z=R[0],P=R[1],_=Object(b.b)(),B=x.username,V=x.displayName,W=x.image,q=Object(n.useState)(!1),M=Object(u.a)(q,2),$=M[0],H=M[1],K=Object(G.g)();Object(n.useEffect)((function(){y(e.user)}),[e.user]),Object(n.useEffect)((function(){L(j===h)}),[j,h]),Object(n.useEffect)((function(){P((function(e){return Object(v.a)(Object(v.a)({},e),{},{displayName:void 0})}))}),[g]),Object(n.useEffect)((function(){P((function(e){return Object(v.a)(Object(v.a)({},e),{},{image:void 0})}))}),[A]),Object(n.useEffect)((function(){c?E(V):(E(void 0),D(void 0))}),[c,V]);var Q=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("/api/users/");case 2:_({type:"Logout-Success"}),K.push("/"),H(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,A&&(t=A.split(",")[1]),a={displayName:g,image:t},e.prev=3,e.next=6,N(B,a);case 6:n=e.sent,s(!1),y(n.data),_({type:"Update-Succes",payload:{displayName:(r=n.data).displayName,image:r.image}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),P(e.t0.response.data.validationErrors);case 15:case"end":return e.stop()}var r}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),Y=f("put","/api/users/"+B),Z=f("delete","/api/users");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card text-center"},r.a.createElement("div",{className:"card-header"},r.a.createElement(T,{className:"rounded-circle shadow",image:W,tempimage:A,alt:x.username+"profile picture",width:"200px",height:"200px"})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",null,V," ",r.a.createElement("span",{className:"font-weight-lighter"},"@",B)),!c&&S&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-primary d-inline-flex",onClick:function(){return s(!0)}},r.a.createElement("i",{className:"material-icons"},"edit"),"Edit"),r.a.createElement("div",null),r.a.createElement("button",{className:"btn btn btn-danger mt-2 d-inline-flex",onClick:function(){return H(!0)}},r.a.createElement("i",{className:"material-icons"},"delete_forever")," delete my account")),c&&r.a.createElement(r.a.Fragment,null," ",r.a.createElement(m,{label:"Change your display name",defaultValue:V,error:z.displayName,onChange:function(e){E(e.target.value)}}),r.a.createElement(m,{className:"form-control-file",type:"file",onChange:function(e){if(!(e.target.files.length<1)){var t=e.target.files[0],a=new FileReader;a.onloadend=function(){D(a.result)},a.readAsDataURL(t)}},error:z.image}),r.a.createElement("button",{className:"btn btn-primary btn-sm d-inline-flex mr-2",onClick:X,disabled:Y},Y?r.a.createElement("span",{className:"spinner-border spinner-border-sm d-inline-flex mr-2"}):r.a.createElement("i",{className:"material-icons"},"done")," Save"),r.a.createElement("button",{className:"btn btn-danger btn-sm d-inline-flex",onClick:function(){return s(!1)},disabled:Y},r.a.createElement("i",{className:"material-icons"},"close"),"Cancel")))),r.a.createElement(J,{visible:$,onClickCancel:function(){H(!1)},onClickOk:Q,modalTittle:"Delete My Account",message:"Are you sure to delete your account",pendingApiCall:Z}))},te=function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),m=Object(u.a)(l,2),d=m[0],p=m[1],b=e.match.params.username,v=f("get","/api/users/"+b,!0);return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(b);case 3:t=e.sent,s(t.data),p(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p(!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[b]),d?r.a.createElement("div",{className:"alert alert-danger text-center m-5"},r.a.createElement("i",{className:"material-icons d-block",style:{fontSize:"45px"}},"error"),"User not found !"):v||c.username!==b?r.a.createElement(P,null):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(ee,{user:c})),r.a.createElement("div",{className:"col"},r.a.createElement($,null))))};var ae=function(){var e=Object(b.c)((function(e){return{isLoggedIn:e.isLoggedIn}})).isLoggedIn;return r.a.createElement(D.a,null,"  ",r.a.createElement(Z,null),r.a.createElement(G.d,null,!e&&r.a.createElement(G.b,{path:"/login",component:A}),r.a.createElement(G.b,{exact:!0,path:"/",component:H}),r.a.createElement(G.b,{path:"/singup",component:Q}),r.a.createElement(G.b,{path:"/users/:username",component:te}),r.a.createElement(G.a,{to:"/"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=a(19),re={isLoggedIn:!1,username:void 0,displayName:void 0,image:void 0,password:void 0},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(v.a)({},re),t=arguments.length>1?arguments[1]:void 0;return"Logout-Success"===t.type?re:"Login-Success"===t.type?Object(v.a)(Object(v.a)({},t.payload),{},{isLoggedIn:!0}):"Update-Succes"===t.type?Object(v.a)(Object(v.a)({},e),{},{displayName:t.payload.displayName,image:t.payload.image}):e},se=a(41),le=a.n(se),ie=a(42),oe=new le.a,ue=function(){var e=function(){var e=oe.get("auth"),t={isLoggedIn:!1,username:void 0,displayName:void 0,image:void 0,password:void 0};return e&&(t=e),t}();E(e);var t=Object(ne.c)(ce,e,Object(ne.a)(ie.a));return t.subscribe((function(){var e;e=t.getState(),oe.set("auth",e),E(t.getState())})),t}();s.a.render(r.a.createElement(b.a,{store:ue},r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.d1331fc1.chunk.js.map